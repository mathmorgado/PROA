<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel</title>
</head>
<body>
    <script>
        function validarDado(funcaoDestino, {validarSenha=false, valorDado=0}) 
        {
            if (validarSenha)
            {
                let senhaUsuario = prompt("Senha: ");

                if (senhaUsuario != 2678)
                {
                    alert("Senha inválida. Tente novamente")
                    validarDado(funcaoDestino, {validarSenha: true}); // prende o usuário num loop até acerta a senha
                }
                else
                {
                    alert("Senha Correta");
                    funcaoDestino(); // encaminha para a função desejada de forma dinâmica
                }
            }
            else
            {
                if (valorDado < 0)
                {
                    alert("Valor inválido. Tente novamente!");
                    funcaoDestino(); // Cria um loop até o usuário digitar um dado válido
                }
                else
                {
                    return valorDado; // Retornando o valor do dado verificado
                }
            }
        }

        function verificarAlcoolCompensa(valorAlcool, valorGasolina)
        {
            // Calculando a porcentagem de economia com o Álcool 
            let porcentagemAlcool = valorAlcool / (valorGasolina / 100)
            return porcentagemAlcool <= 70 // até 70% compensa mais usar álcool)

        }

        function inicio() 
        {
            // definindo
            const postoWayneOil = {
                alcool: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor do álcool no posto Wayne Oil? "))}),
                gasolina: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor da gasolina no posto Wayne Oil? "))})
            };

            const postoStarkPetrol = {
                alcool: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor do álcool no posto Stark Petrol? "))}),
                gasolina: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor da gasolina no posto Stark Petrol? "))})
            };

            // Verificar qual combustivel compensa mais no Posto Wayne Oil
            compensaAlcoolPostoWayneOil = verificarAlcoolCompensa(postoWayneOil.alcool, postoWayneOil.gasolina);
            compensaAlcoolPostoStarkPetrol = verificarAlcoolCompensa(postoStarkPetrol.alcool, postoStarkPetrol.gasolina);

            let mensagem;

            if (compensaAlcoolPostoWayneOil && compensaAlcoolPostoStarkPetrol)
            {
               mensagem = (postoWayneOil.alcool < postoStarkPetrol.alcool)
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Wayne Oil!`
                : `${nomeUsuario}, é mais barato abastecer com álcool no Posto Stark Petrol!`;
            }
            else if (compensaAlcoolPostoWayneOil) 
            {
                mensagem = (verificarAlcoolCompensa(postoWayneOil.alcool, postoStarkPetrol.gasolina))
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Wayne Oil!`
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Stark Petrol!`;
            }
            else if (compensaAlcoolPostoStarkPetrol) 
            {
                mensagem = (verificarAlcoolCompensa(postoStarkPetrol.alcool, compensaAlcoolPostoWayneOil.gasolina))
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Stark Petrol!`
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Wayne Oil!`;
            }
            else
            {
                mensagem = (postoWayneOil.gasolina < postoStarkPetrol.gasolina)
                ? `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Wayne Oil!`
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Stark Petrol!`;
            }

            alert(mensagem);
        }

        let nomeHotel = prompt("Nome do hotel: ");
        alert(`O nome do hotel é ${nomeHotel}`);

        let nomeUsuario = prompt("Nome do usuário: ");
        validarDado(inicio, {validarSenha: true});
    </script>
</body>
</html>