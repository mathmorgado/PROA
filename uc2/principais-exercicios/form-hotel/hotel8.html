<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel</title>
</head>
<body>
    <script>
        // Parâmetros: Para qual função devo ir em caso de erro/finalização. Se é necessário validar a senha. Caso não seja necessário validar senha, qual dado deve ser validado?
        function validarDado(funcaoDestino, {validarSenha=false, valorDado=0}) 
        {
            if (validarSenha)
            {
                let senhaUsuario = prompt("Senha: ");

                if (senhaUsuario != 2678)
                {
                    alert("Senha inválida. Tente novamente")
                    validarDado(funcaoDestino, {validarSenha: true}); // prende o usuário num loop até acerta a senha
                }
                else
                {
                    alert("Senha Correta");
                    funcaoDestino(); // encaminha para a função desejada de forma dinâmica
                }
            }
            else
            {
                if (valorDado < 0)
                {
                    alert("Valor inválido. Tente novamente!");
                    funcaoDestino(); // Cria um loop até o usuário digitar um dado válido
                }
                else
                {
                    return valorDado; // Retornando o valor do dado verificado
                }
            }
        }

        function verificarAlcoolCompensa(valorAlcool, valorGasolina)
        {
            // Calculando a porcentagem de economia com o Álcool 
            let porcentagemAlcool = valorAlcool / (valorGasolina / 100)
            return porcentagemAlcool <= 70 // até 70% compensa mais usar álcool)

        }

        function inicio() 
        {
            // definindo os valores do alcool e gasolina no posto Waye Oil e fazendo a validação ao mesmo tempo
            const postoWayneOil = {
                alcool: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor do álcool no posto Wayne Oil? "))}),
                gasolina: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor da gasolina no posto Wayne Oil? "))})
            };

            // definindo os valores do alcool e gasolina no posto Starck Petrol e fazendo a validação ao mesmo tempo
            const postoStarkPetrol = {
                alcool: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor do álcool no posto Stark Petrol? "))}),
                gasolina: validarDado(inicio, {valorDado: parseFloat(prompt("Qual o valor da gasolina no posto Stark Petrol? "))})
            };

            // Verificação de qual compustível compensa mais em cada posto. (true == alcool, false == gasolina)
            compensaAlcoolPostoWayneOil = verificarAlcoolCompensa(postoWayneOil.alcool, postoWayneOil.gasolina);
            compensaAlcoolPostoStarkPetrol = verificarAlcoolCompensa(postoStarkPetrol.alcool, postoStarkPetrol.gasolina);

            // Declarando a variavel que vai armazenar a mensagem final (Qual é o combustível que mais compensa e de qual posto ele é?)
            let mensagem;

            // Série de validações para descobrir qual combustivel de qual posto compensa mais
            if (compensaAlcoolPostoWayneOil && compensaAlcoolPostoStarkPetrol) // Se o alcool compensa mais em ambos, pegue o mais barato entre eles
            {
               mensagem = (postoWayneOil.alcool < postoStarkPetrol.alcool) // Comparando os preços de álcool em ambos os postos pra ver qual o mais barato (if)
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Wayne Oil!` // true == alcool do posto wayne é mais barato
                : `${nomeUsuario}, é mais barato abastecer com álcool no Posto Stark Petrol!`; // false == alcool do posto wayne é mais caro -> alcool do posto Stark é mais barato
            }
            else if (compensaAlcoolPostoWayneOil) // Caso compense o alcool no Posto Wayne e a gasolina no Stark, verificar se o alcool compensa mais sobre o valor da gasolina (<70%)
            {
                mensagem = (verificarAlcoolCompensa(postoWayneOil.alcool, postoStarkPetrol.gasolina)) // verificando a porcentagem de economia com o Álcool 
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Wayne Oil!` // true == alcool compensa mais -> alcool do posto Wayne
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Stark Petrol!`; // false == gasolina compensa mais -> gasolina do posto Stark
            }
            else if (compensaAlcoolPostoStarkPetrol)  // Caso compense o alcool no Posto Stark e a gasolina no Wayne, verificar se o alcool compensa mais sobre o valor da gasolina (<70%)
            {
                mensagem = (verificarAlcoolCompensa(postoStarkPetrol.alcool, compensaAlcoolPostoWayneOil.gasolina)) // verificando a porcentagem de economia com o Álcool
                ? `${nomeUsuario}, é mais barato abastecer com álcool no Posto Stark Petrol!` // true == alcool compensa mais -> alcool do posto Stark
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Wayne Oil!`; // false == gasolina compensa mais -> gasolina do posto Wayne
            }
            else
            {
                mensagem = (postoWayneOil.gasolina < postoStarkPetrol.gasolina) // Comparando os preços de gasolina em ambos os postos pra ver qual o mais barato (if)
                ? `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Wayne Oil!` // true == gasolina no posto wayne mais barata
                : `${nomeUsuario}, é mais barato abastecer com gasolina no Posto Stark Petrol!`; // false == gasolina no posto wayne mais cara -> gasolina no posto stark mais barato!
            }

            alert(mensagem);
        }

        let nomeHotel = prompt("Nome do hotel: ");
        alert(`O nome do hotel é ${nomeHotel}`);

        let nomeUsuario = prompt("Nome do usuário: ");
        validarDado(inicio, {validarSenha: true});
    </script>
</body>
</html>